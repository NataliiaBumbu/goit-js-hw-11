{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["const options = {\n    method: 'GET',\n  };\n  const API_URL = 'https://pixabay.com/api/?';\n  const API_KEY = '45125188-29656ded7c12a384255e46c86';\n  \n  export async function getGalleryData(queryValue) {\n    try {\n      const searchParams = new URLSearchParams({\n        key: API_KEY,\n        q: queryValue,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n      });\n  \n      const response = await fetch(API_URL + searchParams, options).then();\n      if (!response.ok) {\n        showInfoMessage(MESSAGES.error, MESSAGES_BG_COLORS.orange);\n        return;\n      }\n      return await response.json();\n    } catch (err) {\n      showInfoMessage(\n        `${MESSAGES.exception} ERROR:  ${err}`,\n        MESSAGES_BG_COLORS.orange\n      );\n    }\n  }\n\n\n  const MESSAGES = {\n    info: 'Please enter a value in the search field!',\n    warning:\n      'Sorry, there are no images matching your search query. Please try again!',\n    error:\n      'Sorry, there are no connection to the server. Please try again later! ',\n    exception:\n      'Exception: We have some issue with connection. Please try again later! ',\n  };\n  \n  const MESSAGES_BG_COLORS = {\n    blue: '#000000',\n    orange: '#f28111',\n    red: '#e97782',\n  };\n  \n  function showInfoMessage(message, color) {\n    iziToast.info({\n      position: 'topRight',\n      backgroundColor: `${color}`,\n      message: `${message}`,\n    });\n  }\n\n  export { MESSAGES, MESSAGES_BG_COLORS, showInfoMessage };","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nexport function renderGallery(data, tagToInsert) {\n  tagToInsert.innerHTML = markup(data);\n\n  lightbox.refresh();\n}\n\nfunction markup(data) {\n  return data.hits\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `<li class=\"gallery-item hvr-grow\">\n\t <a class=\"gallery-link\" href=\"${largeImageURL}\">\n\t <figure class=\"gallery-figure \">\n\t <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\">\n\t <figcaption class=\"gallery-figcaption\">\n\t  <ul class=\"img-content-wrapper\">\n\t\t<li>Likes<span>${likes}</span></li>\n\t\t<li>Views<span>${views}</span></li>\n\t\t<li>Comments<span>${comments}</span></li>\n\t\t<li>Downloads<span>${downloads}</span></li>\n\t   </ul>\n\t </figcaption>\n\t </figure>\n\t </a>\n\t </li>`\n    )\n    .join('');\n}","import iziToast from 'izitoast';\n\nimport { MESSAGES, MESSAGES_BG_COLORS, showInfoMessage } from './js/pixabay-api';\n\nimport { getGalleryData } from './js/pixabay-api';\nimport { renderGallery } from './js/render-functions';\n\nconst form = document.querySelector('.search-form');\nconst gallery = document.querySelector('.gallery');\nconst div = document.createElement('div');\n\nform.addEventListener('submit', onSubmitForm);\n\nasync function onSubmitForm(event) {\n    event.preventDefault();\n  \n    iziToast.destroy();\n    gallery.innerHTML = '';\n    addLoader();\n  \n    const formData = new FormData(event.target);\n    const { search } = Object.fromEntries(formData.entries());\n  \n    if (!search.trim()) {\n      showInfoMessage(MESSAGES.info, MESSAGES_BG_COLORS.blue);\n      gallery.innerHTML = '';\n      return;\n    }\n  \n    try {\n      const galleryData = await getGalleryData(search.trim());\n      if (validateGalleryData(galleryData)) {\n        renderGallery(galleryData, gallery);\n      }\n    } catch (error) {\n      showInfoMessage(MESSAGES.exception + error, MESSAGES_BG_COLORS.orange);\n    }\n  \n    event.target.reset();\n  }\n  function addLoader() {\n    div.classList.add('loader');\n    gallery.append(div);\n  }\n  \n  function validateGalleryData(galleryData) {\n    if (!galleryData) {\n      gallery.innerHTML = '';\n      return false;\n    } else if (galleryData && galleryData.totalHits === 0) {\n      showInfoMessage(MESSAGES.warning, MESSAGES_BG_COLORS.red);\n      gallery.innerHTML = '';\n      return false;\n    } else {\n      return true;\n    }\n}"],"names":["options","API_URL","API_KEY","getGalleryData","queryValue","searchParams","response","showInfoMessage","MESSAGES","MESSAGES_BG_COLORS","err","message","color","lightbox","SimpleLightbox","renderGallery","data","tagToInsert","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","form","gallery","div","onSubmitForm","event","iziToast","addLoader","formData","search","galleryData","validateGalleryData","error"],"mappings":"6vBAAA,MAAMA,EAAU,CACZ,OAAQ,KACZ,EACQC,EAAU,4BACVC,EAAU,qCAET,eAAeC,EAAeC,EAAY,CAC/C,GAAI,CACF,MAAMC,EAAe,IAAI,gBAAgB,CACvC,IAAKH,EACL,EAAGE,EACH,WAAY,QACZ,YAAa,aACb,WAAY,EACpB,CAAO,EAEKE,EAAW,MAAM,MAAML,EAAUI,EAAcL,CAAO,EAAE,OAC9D,GAAI,CAACM,EAAS,GAAI,CAChBC,EAAgBC,EAAS,MAAOC,EAAmB,MAAM,EACzD,MACD,CACD,OAAO,MAAMH,EAAS,MACvB,OAAQI,EAAK,CACZH,EACE,GAAGC,EAAS,SAAS,YAAYE,CAAG,GACpCD,EAAmB,MAC3B,CACK,CACF,CAGD,MAAMD,EAAW,CACf,KAAM,4CACN,QACE,2EACF,MACE,yEACF,UACE,yEACN,EAEQC,EAAqB,CACzB,KAAM,UACN,OAAQ,UACR,IAAK,SACT,EAEE,SAASF,EAAgBI,EAASC,EAAO,CACvC,SAAS,KAAK,CACZ,SAAU,WACV,gBAAiB,GAAGA,CAAK,GACzB,QAAS,GAAGD,CAAO,EACzB,CAAK,CACL,CCnDA,MAAME,EAAW,IAAIC,EAAe,aAAc,CAChD,aAAc,MACd,aAAc,GAChB,CAAC,EAEM,SAASC,EAAcC,EAAMC,EAAa,CAC/CA,EAAY,UAAYC,EAAOF,CAAI,EAEnCH,EAAS,QAAO,CAClB,CAEA,SAASK,EAAOF,EAAM,CACpB,OAAOA,EAAK,KACT,IACC,CAAC,CACC,aAAAG,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACR,IAAY;AAAA,kCACsBL,CAAa;AAAA;AAAA,oCAEXD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA,mBAG3CC,CAAK;AAAA,mBACLC,CAAK;AAAA,sBACFC,CAAQ;AAAA,uBACPC,CAAS;AAAA;AAAA;AAAA;AAAA;AAAA,QAM3B,EACA,KAAK,EAAE,CACZ,CClCA,MAAMC,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAM,SAAS,cAAc,KAAK,EAExCF,EAAK,iBAAiB,SAAUG,CAAY,EAE5C,eAAeA,EAAaC,EAAO,CAC/BA,EAAM,eAAc,EAEpBC,EAAS,QAAO,EAChBJ,EAAQ,UAAY,GACpBK,IAEA,MAAMC,EAAW,IAAI,SAASH,EAAM,MAAM,EACpC,CAAE,OAAAI,CAAM,EAAK,OAAO,YAAYD,EAAS,QAAO,CAAE,EAExD,GAAI,CAACC,EAAO,OAAQ,CAClB3B,EAAgBC,EAAS,KAAMC,EAAmB,IAAI,EACtDkB,EAAQ,UAAY,GACpB,MACD,CAED,GAAI,CACF,MAAMQ,EAAc,MAAMhC,EAAe+B,EAAO,KAAM,CAAA,EAClDE,EAAoBD,CAAW,GACjCpB,EAAcoB,EAAaR,CAAO,CAErC,OAAQU,EAAO,CACd9B,EAAgBC,EAAS,UAAY6B,EAAO5B,EAAmB,MAAM,CACtE,CAEDqB,EAAM,OAAO,OACd,CACD,SAASE,GAAY,CACnBJ,EAAI,UAAU,IAAI,QAAQ,EAC1BD,EAAQ,OAAOC,CAAG,CACnB,CAED,SAASQ,EAAoBD,EAAa,CACxC,OAAKA,EAGMA,GAAeA,EAAY,YAAc,GAClD5B,EAAgBC,EAAS,QAASC,EAAmB,GAAG,EACxDkB,EAAQ,UAAY,GACb,IAEA,IAPPA,EAAQ,UAAY,GACb,GAQb"}